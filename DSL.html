<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Title</title>

</head>

<body>
  <div id="output"></div>
  <script id="entry" type="text/html">
  <div class="container">
    <div>{{user.name}}</div>
    <ul>
      <li dsl-for="item for user.hobby">{{item}}</li>
    </ul>
  </div>
</script>
  <script type="text/javascript">
    class DSL {
      constructor(options) {
        const { entry, data } = options;
        this.templateStr = document.getElementById(entry).innerText;
        this.data = data;
      }

      init() {
        const nodes = this.transclude()
        console.log('dom nodes:', nodes);
        const asts = this.compile(nodes);
        console.log('ast nodes:', asts);
        return `${this.templateStr}`;
      }

      transclude() {
        const div = document.createElement("div")
        div.innerHTML = this.templateStr.trim();
        return div;
      }


      compile() {

        return 'ast nodes';
      }

      compileNode(node) {
        var type = node.nodeType
        if (type === 1) {
          console.log('compileElement')
          // return compileElement(node, options)
        } else if (type === 3 && node.data.trim()) {
          console.log('compileTextNode')
          // return compileTextNode(node, options)
        } else {
          return null
        }
      }

      compileNodeList(nodes){
        const result = [];
        if(!nodes || nodes.length < 0){
          return result;
        }  
        nodes.forEach(nodes => {
          result.push(compileNode(nodes))
        });
        return result;
      }

    }
    const user = {
      name: 'Kim Wang',
      hobby: ['watching', 'reading', 'swimming', 'surfing']
    }

    const dsl = new DSL({
      entry: 'entry',
      data: user,
    })

    document.getElementById('output').innerHTML = dsl.init();
  </script>
</body>

</html>